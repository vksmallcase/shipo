(window.webpackJsonp=window.webpackJsonp||[]).push([[50],{3021:function(e,t,n){"use strict";function i(e){return e&&"value"in e}function r(e){return e&&"field"in e&&!!e.field}function a(e){return r(e)&&"type"in e&&!!e.type}n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a}))},327:function(e,t,n){"use strict";function i(e,t){return e===t}function r(e,t,n){if(null===t||null===n||t.length!==n.length)return!1;for(var i=t.length,r=0;r<i;r++)if(!e(t[r],n[r]))return!1;return!0}function a(e){var t=Array.isArray(e[0])?e[0]:e;if(!t.every((function(e){return"function"==typeof e}))){var n=t.map((function(e){return typeof e})).join(", ");throw new Error("Selector creators expect all input-selectors to be functions, instead received the following types: ["+n+"]")}return t}n.d(t,"a",(function(){return o}));var o=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return function(){for(var t=arguments.length,i=Array(t),r=0;r<t;r++)i[r]=arguments[r];var o=0,s=i.pop(),c=a(i),u=e.apply(void 0,[function(){return o++,s.apply(null,arguments)}].concat(n)),l=e((function(){for(var e=[],t=c.length,n=0;n<t;n++)e.push(c[n].apply(null,arguments));return u.apply(null,e)}));return l.resultFunc=s,l.dependencies=c,l.recomputations=function(){return o},l.resetRecomputations=function(){return o=0},l}}((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i,n=null,a=null;return function(){return r(t,n,arguments)||(a=e.apply(null,arguments)),n=arguments,a}}))},4320:function(e,t,n){var i=n(4336).dispatch,r=Math.PI/180;function a(e){return e.text}function o(){return"serif"}function s(){return"normal"}function c(e){return Math.sqrt(e.value)}function u(){return 30*(~~(6*Math.random())-3)}function l(){return 1}function f(e,t,n,i){if(!t.sprite){var a=e.context,o=e.ratio;a.clearRect(0,0,2048/o,2048/o);var s=0,c=0,u=0,l=n.length;for(--i;++i<l;){t=n[i],a.save(),a.font=t.style+" "+t.weight+" "+~~((t.size+1)/o)+"px "+t.font;var f=a.measureText(t.text+"m").width*o,h=t.size<<1;if(t.rotate){var d=Math.sin(t.rotate*r),m=Math.cos(t.rotate*r),p=f*m,y=f*d,g=h*m,v=h*d;f=Math.max(Math.abs(p+v),Math.abs(p-v))+31>>5<<5,h=~~Math.max(Math.abs(y+g),Math.abs(y-g))}else f=f+31>>5<<5;if(h>u&&(u=h),s+f>=2048&&(s=0,c+=u,u=0),c+h>=2048)break;a.translate((s+(f>>1))/o,(c+(h>>1))/o),t.rotate&&a.rotate(t.rotate*r),a.fillText(t.text,0,0),t.padding&&(a.lineWidth=2*t.padding,a.strokeText(t.text,0,0)),a.restore(),t.width=f,t.height=h,t.xoff=s,t.yoff=c,t.x1=f>>1,t.y1=h>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,s+=f}for(var b=a.getImageData(0,0,2048/o,2048/o).data,w=[];--i>=0;)if((t=n[i]).hasText){for(var x=(f=t.width)>>5,O=(h=t.y1-t.y0,0);O<h*x;O++)w[O]=0;if(null==(s=t.xoff))return;c=t.yoff;for(var T=0,D=-1,j=0;j<h;j++){for(O=0;O<f;O++){var S=x*j+(O>>5),C=b[2048*(c+j)+(s+O)<<2]?1<<31-O%32:0;w[S]|=C,T|=C}T?D=j:(t.y0++,h--,j--,c++)}t.y1=t.y0+D,t.sprite=w.slice(0,(t.y1-t.y0)*x)}}}function h(e,t,n){n>>=5;for(var i,r=e.sprite,a=e.width>>5,o=e.x-(a<<4),s=127&o,c=32-s,u=e.y1-e.y0,l=(e.y+e.y0)*n+(o>>5),f=0;f<u;f++){i=0;for(var h=0;h<=a;h++)if((i<<c|(h<a?(i=r[f*a+h])>>>s:0))&t[l+h])return!0;l+=n}return!1}function d(e,t){var n=e[0],i=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>i.x&&(i.x=t.x+t.x1),t.y+t.y1>i.y&&(i.y=t.y+t.y1)}function m(e){var t=e[0]/e[1];return function(e){return[t*(e*=.1)*Math.cos(e),e*Math.sin(e)]}}function p(){return document.createElement("canvas")}function y(e){return"function"==typeof e?e:function(){return e}}e.exports=function(){var e=[256,256],t=a,n=o,r=c,v=s,b=s,w=u,x=l,O=m,T=[],D=1/0,j=i("word","end"),S=null,C=Math.random,E={},F=p;function k(t,n,i){e[0],e[1];for(var r,a,o,s,c,u=n.x,l=n.y,f=Math.sqrt(e[0]*e[0]+e[1]*e[1]),d=O(e),m=C()<.5?1:-1,p=-m;(r=d(p+=m))&&(a=~~r[0],o=~~r[1],!(Math.min(Math.abs(a),Math.abs(o))>=f));)if(n.x=u+a,n.y=l+o,!(n.x+n.x0<0||n.y+n.y0<0||n.x+n.x1>e[0]||n.y+n.y1>e[1]||i&&h(n,t,e[0])||i&&(c=i,!((s=n).x+s.x1>c[0].x&&s.x+s.x0<c[1].x&&s.y+s.y1>c[0].y&&s.y+s.y0<c[1].y)))){for(var y,g=n.sprite,v=n.width>>5,b=e[0]>>5,w=n.x-(v<<4),x=127&w,T=32-x,D=n.y1-n.y0,j=(n.y+n.y0)*b+(w>>5),S=0;S<D;S++){y=0;for(var E=0;E<=v;E++)t[j+E]|=y<<T|(E<v?(y=g[S*v+E])>>>x:0);j+=b}return delete n.sprite,!0}return!1}return E.canvas=function(e){return arguments.length?(F=y(e),E):F},E.start=function(){var i=function(e){e.width=e.height=1;var t=Math.sqrt(e.getContext("2d").getImageData(0,0,1,1).data.length>>2);e.width=2048/t,e.height=2048/t;var n=e.getContext("2d");return n.fillStyle=n.strokeStyle="red",n.textAlign="center",{context:n,ratio:t}}(F()),a=function(e){var t=[],n=-1;for(;++n<e;)t[n]=0;return t}((e[0]>>5)*e[1]),o=null,s=T.length,c=-1,u=[],l=T.map((function(e,i){return e.text=t.call(this,e,i),e.font=n.call(this,e,i),e.style=v.call(this,e,i),e.weight=b.call(this,e,i),e.rotate=w.call(this,e,i),e.size=~~r.call(this,e,i),e.padding=x.call(this,e,i),e})).sort((function(e,t){return t.size-e.size}));return S&&clearInterval(S),S=setInterval(h,0),h(),E;function h(){for(var t=Date.now();Date.now()-t<D&&++c<s&&S;){var n=l[c];n.x=e[0]*(C()+.5)>>1,n.y=e[1]*(C()+.5)>>1,f(i,n,l,c),n.hasText&&k(a,n,o)&&(u.push(n),j.call("word",E,n),o?d(o,n):o=[{x:n.x+n.x0,y:n.y+n.y0},{x:n.x+n.x1,y:n.y+n.y1}],n.x-=e[0]>>1,n.y-=e[1]>>1)}c>=s&&(E.stop(),j.call("end",E,u,o))}},E.stop=function(){return S&&(clearInterval(S),S=null),E},E.timeInterval=function(e){return arguments.length?(D=null==e?1/0:e,E):D},E.words=function(e){return arguments.length?(T=e,E):T},E.size=function(t){return arguments.length?(e=[+t[0],+t[1]],E):e},E.font=function(e){return arguments.length?(n=y(e),E):n},E.fontStyle=function(e){return arguments.length?(v=y(e),E):v},E.fontWeight=function(e){return arguments.length?(b=y(e),E):b},E.rotate=function(e){return arguments.length?(w=y(e),E):w},E.text=function(e){return arguments.length?(t=y(e),E):t},E.spiral=function(e){return arguments.length?(O=g[e]||e,E):O},E.fontSize=function(e){return arguments.length?(r=y(e),E):r},E.padding=function(e){return arguments.length?(x=y(e),E):x},E.random=function(e){return arguments.length?(C=e,E):C},E.on=function(){var e=j.on.apply(j,arguments);return e===j?E:e},E};var g={archimedean:m,rectangular:function(e){var t=4*e[0]/e[1],n=0,i=0;return function(e){var r=e<0?-1:1;switch(Math.sqrt(1+4*r*e)-r&3){case 0:n+=t;break;case 1:i+=4;break;case 2:n-=t;break;default:i-=4}return[n,i]}}}},4329:function(e,t,n){"use strict";n.d(t,"a",(function(){return vt}));var i=n(327),r=n(3021);function a(e){return!Array.isArray(e)}function o(e){return null!=e}var s=n(2934);const c="linear",u="log",l="pow",f="sqrt",h="symlog",d="time",m="utc",p="quantile",y="quantize",g="threshold",v="bin-ordinal",b="ordinal",w="point",x="band";function O(e){return"X"===e||"XBand"===e}function T(e){return"Y"===e||"YBand"===e}function D(e){return O(e)||T(e)}var j=Object.keys;function S(e,t){return"Invalid "+e+": "+String(t)+"."}const C=["january","february","march","april","may","june","july","august","september","october","november","december"],E=C.map(e=>e.slice(0,3)),F=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],k=F.map(e=>e.slice(0,3));function M(e){return"number"==typeof e}function I(e){return!!M(e)||!isNaN(e)&&!isNaN(parseFloat(e))}function q(e,t){const n=[];if(t&&void 0!==e.day&&j(e).length>1&&delete(e={...e}).day,void 0!==e.year?n.push(e.year):void 0!==e.day?n.push(2006):n.push(0),void 0!==e.month){const i=t?function(e){if(I(e)&&(e=Number(e)),M(e))return e-1;const t=e.toLowerCase(),n=C.indexOf(t);if(-1!==n)return n;const i=t.slice(0,3),r=E.indexOf(i);if(-1!==r)return r;throw new Error(S("month",e))}(e.month):e.month;n.push(i)}else if(void 0!==e.quarter){const i=t?function(e){if(I(e)&&(e=Number(e)),M(e))return e>4&&console.warn(S("quarter",e)),e-1;throw new Error(S("quarter",e))}(e.quarter):e.quarter;n.push(M(i)?3*i:i+"*3")}else n.push(0);if(void 0!==e.date)n.push(e.date);else if(void 0!==e.day){const i=t?function(e){if(I(e)&&(e=Number(e)),M(e))return e%7;const t=e.toLowerCase(),n=F.indexOf(t);if(-1!==n)return n;const i=t.slice(0,3),r=k.indexOf(i);if(-1!==r)return r;throw new Error(S("day",e))}(e.day):e.day;n.push(M(i)?i+1:i+"+1")}else n.push(1);return["hours","minutes","seconds","milliseconds"].forEach(t=>{const i=e[t];n.push(void 0===i?0:i)}),n}function V(e){return"number"==typeof e||"string"==typeof e?new Date(e):new Date(function(e){const t=q(e,!0);return e.utc?Number(new Date(Date.UTC(...t))):Number(new Date(...t))}(e))}function N(e){return!!e&&!(e instanceof Date)&&"string"!=typeof e&&"boolean"!=typeof e&&"number"!=typeof e&&("year"in e&&null!=e.year||"quarter"in e&&null!=e.quarter||"month"in e&&null!=e.month||"date"in e&&null!=e.date||"day"in e&&null!=e.day||"hours"in e&&null!=e.hours||"minutes"in e&&null!=e.minutes||"seconds"in e&&null!=e.seconds||"milliseconds"in e&&null!=e.milliseconds)}function z(e){return""+e}var L=n(1166);function A({formatType:e,format:t,formatInLocalTime:n}){if("time"===e){const e=L.a.resolveTimeFormat({format:t,formatInLocalTime:n});return t=>e(t)}if("number"===e||void 0!==t&&t.length>0){const e=L.a.resolveNumberFormat(t);return t=>e(t)}return z}function P(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class B{constructor(e){P(this,"channelEncoder",void 0),P(this,"config",void 0),P(this,"formatValue",void 0),this.channelEncoder=e,this.config=e.definition.axis,this.formatValue=A(this.config)}getTitle(){return this.config.title}hasTitle(){const{title:e}=this.config;return null!=e&&""!==e}getTickLabels(){const{tickCount:e,values:t}=this.config;if(void 0!==t)return t.map(e=>this.formatValue(N(e)?V(e):e));const{scale:n}=this.channelEncoder;if(n&&"domain"in n){return("ticks"in n?n.ticks(e):n.domain()).map(this.formatValue)}return[]}}var W=n(2917),X=n.n(W);function Y(e){return!function(e){return!1===e||null===e}(e)}const _={strategy:"flat"},R={labelAngle:40,strategy:"rotate"};function G(e,t="auto"){let n;switch(t){case"flat":n=_;break;case"rotate":n=R;break;case"auto":n=O(e)?R:_;break;default:n=t}return{...n}}const U=[c,l,f,h,u,d,m],J=new Set(U),H=[p,y,g],K=(new Set(H),U.concat(H)),Q=(new Set(K),new Set([b,v,w,x]),U),Z=J,$=new Set([x,w,b]),ee=new Set([v,p,y,g]),te=new Set([d,m]),ne=[c,u,l,f,h,d,m,p,y,g,v,b,w,x],ie=new Set(ne);function re(e,t){if(function(e,t){return Object(r.b)(t)&&D(e)}(e,t)&&Y(t.axis)){const n=!0===t.axis||void 0===t.axis?{}:t.axis,i=O(e),{format:r=t.format,formatType:a=t.formatType,formatInLocalTime:o=t.formatInLocalTime,labelAngle:s=0,labelFlush:c,labelOverlap:u,labelPadding:l=4,orient:f=(i?"bottom":"left"),tickCount:h=5,ticks:d=!0,title:m=t.title,titlePadding:p=4}=n,y={...n,format:r,formatType:a,labelAngle:s,labelFlush:void 0===c?t.scale&&void 0!==t.scale.type&&J.has(t.scale.type):c,labelOverlap:G(e,u),labelPadding:l,orient:f,tickCount:h,ticks:d,title:m,titlePadding:p};return void 0!==o&&(y.formatInLocalTime=o),y}return!1}function ae(e,t,n=!1){if("nominal"===t||"ordinal"===t)switch(e){case"XBand":case"YBand":return x;case"X":case"Y":case"Numeric":return w;case"Color":case"Category":return b}else if("quantitative"===t)switch(e){case"XBand":case"YBand":case"X":case"Y":case"Numeric":return c;case"Color":return n?v:c}else if("temporal"===t)switch(e){case"XBand":case"YBand":case"X":case"Y":case"Numeric":return m;case"Color":return c}}const oe=[w,x],se=new Set(oe),ce=ne.filter(e=>!se.has(e)),ue=new Set(ce),le=new Set(Q.concat(oe)),fe=new Set(K);fe.delete(u),fe.delete(d),fe.delete(m),fe.delete(g),fe.delete(p);const he={align:se,base:new Set([u]),clamp:Z,constant:new Set([h]),domain:ie,exponent:new Set([l]),interpolate:ue,nice:new Set(Q.concat([y,g])),padding:le,paddingInner:new Set([x]),paddingOuter:se,range:ie,reverse:ie,round:le,scheme:ue,type:ie,unknown:new Set([b]),zero:fe};function de(e){return Z.has(e.type)}function me(e){return t="zero",n=e.type,he[t].has(n);var t,n}const pe=new Set(["time","date","datetime","timestamp"]);function ye(e,t=""){return D(e)||"Numeric"===e?pe.has(t.toLowerCase())?"temporal":"quantitative":"nominal"}function ge(e,t){var n;if(Object(r.c)(t))return{...t,axis:!1,legend:!1,scale:!1,title:""};const i={...t,title:Object(r.a)(t)?null!=(n=t.title)?n:t.field:"",type:Object(r.b)(t)?t.type:ye(e,t.field)},a=function(e,t){if(Object(r.b)(t)&&Y(t.scale)){const{scale:n={},type:i,bin:r}=t,{type:a=ae(e,i,r)}=n;if(void 0===a)return!1;const o={...n,type:a};return de(o)&&(void 0===o.nice&&(o.nice=!te.has(a)),void 0===o.clamp&&(o.clamp=!0)),me(o)&&void 0===o.zero&&(o.zero=!0),o}return!1}(e,i),o=function(e){const{formatType:t,formatInLocalTime:n,format:i,type:r,scaleType:a}=e;let o;return void 0!==t?o=t:"quantitative"===r?o="number":"temporal"===r||"time"===a||"utc"===a?o="time":void 0!==i&&i.length>0&&(o="number"),"time"===o?{formatType:"time",formatInLocalTime:n||void 0===n&&"time"===a,format:i}:{formatType:o,format:i}}({...t,scaleType:a?a.type:void 0}),s={...i,...o,scale:a},c=re(e,s),u=function(e,t){return"legend"in t&&void 0!==t.legend?t.legend:!D(e)&&"Text"!==e&&{}}(e,s);return{...s,axis:c,legend:u}}var ve=n(916),be=n(2936),we=n(2937),xe=n(1983),Oe=n(2938),Te=n(2947),De=n(2939),je=n(2940),Se=n(1984),Ce=n(2950),Ee=n(2941);var Fe=n(2905),ke=n(2906),Me=n(2907),Ie=n(2903),qe=n(1989),Ve=n(2904),Ne=n(2902),ze=n(2911),Le=n(2912),Ae=n(2913),Pe=n(2909),Be=n(2910),We=n(2908);const Xe={day:Fe.a,hour:ke.a,minute:Me.a,month:Ie.a,second:qe.a,week:Ve.a,year:Ne.a},Ye={day:ze.a,hour:Le.a,minute:Ae.a,month:Pe.a,second:qe.a,week:Be.a,year:We.a};function _e(e,t){if("nice"in e&&void 0!==e.nice&&"nice"in t){const{nice:n}=e;if("boolean"==typeof n)n&&t.nice();else if("number"==typeof n)t.nice(n);else{const i=t,{type:r}=e;if("string"==typeof n)i.nice(r===m?Ye[n]:Xe[n]);else{const{interval:e,step:t}=n,a=(r===m?Ye[e]:Xe[e]).every(t);null!==a&&i.nice(a)}}}}function Re(e,t){return e&&Z.has(t)}function Ge(e,t){if("zero"in e&&!0===e.zero&&Re(t,e.type)){const e=t.domain(),[n,i]=e,r=i<n,[a,o]=r?[i,n]:[n,i],s=[Math.min(0,a),Math.max(0,o)];t.domain(r?s.reverse():s)}}var Ue=n(2942),Je=n(2943),He=n(2944),Ke=n(2945),Qe=n(1559);const Ze={lab:Ue.a,hcl:Je.a,"hcl-long":Je.b,hsl:He.a,"hsl-long":He.b,cubehelix:Ke.b,"cubehelix-long":Ke.a,rgb:Qe.a};function $e(e,t){"interpolate"in e&&void 0!==e.interpolate&&"interpolate"in t&&t.interpolate(function(e){switch(e){case"lab":case"hcl":case"hcl-long":case"hsl":case"hsl-long":case"cubehelix":case"cubehelix-long":case"rgb":return Ze[e]}const{type:t,gamma:n}=e,i=Ze[t];return void 0===n?i:i.gamma(n)}(e.interpolate))}var et=n(2935);function tt(e,t){return te.has(t)?e.filter(e=>"boolean"!=typeof e).map(e=>"string"==typeof e||"number"==typeof e?new Date(e):e):e.map(e=>"string"==typeof e||"boolean"==typeof e?Number(e):e)}function nt(e){return e.map(e=>""+e)}function it(e,t){if(e.length>0&&e.every(o))return e;if(2===e.length&&2===t.length&&e.filter(o).length>0){const[n,i]=e,[r,a]=t;let s=r;o(n)&&(s=n.valueOf()>r.valueOf()?n:r);let c=a;return o(i)&&(c=i.valueOf()<a.valueOf()?i:a),[s,c]}return t}function rt(e){return e.filter(e=>null!=e)}function at(e){return e.map(e=>e instanceof Date||!N(e)?e:V(e))}function ot(e,t,n){const{reverse:i,type:r}=e,a=function(e){return e?e=>e.concat().reverse():e=>e}(i);if(Re(t,r)&&de(e)||function(e,t){return e&&ee.has(t)}(t,r)&&function(e){return ee.has(e.type)}(e))e.domain?2!==(o=e.domain).length||null!=o[0]&&null!=o[1]?t.domain(a(at(e.domain))):n&&t.domain(a(it(tt(at(e.domain),r),tt(rt(n),r)))):n&&t.domain(a(tt(rt(n),r)));else if(function(e,t){return e&&$.has(t)}(t,r)&&function(e){return $.has(e.type)}(e))if(e.domain){const i=nt(at(e.domain));t.domain(a(n?function(e,t=[]){if(0===e.length)return t;const n=new Set(e);return e.concat(t.filter(e=>!n.has(e)))}(i,nt(n)):i))}else n&&t.domain(a(nt(n)));var o}var st=n(275);function ct(e){return"[object String]"!==Object.prototype.toString.call(e)}function ut(e,t){const{range:n,domain:i}=e;if(void 0===n){if("scheme"in e&&void 0!==e.scheme){const{scheme:n}=e;let r,a,o;de(e)&&i&&(a=i.length),ct(n)?(r=n.name,n.count&&(a=n.count),o=n.extent):r=n;const s=L.a.resolveColorScheme({name:r,type:"sequential"});if(void 0!==s&&"sequential"===s.type){const e=Object(st.a)(s);t.range(e.getColors(a,o))}}}else t.range(n)}function lt(e,t){return ot(t,e),ut(t,e),function(e,t){"align"in e&&void 0!==e.align&&"align"in t&&t.align(e.align)}(t,e),function(e,t){"base"in e&&void 0!==e.base&&"base"in t&&t.base(e.base)}(t,e),function(e,t){"clamp"in e&&!0===e.clamp&&"clamp"in t&&t.clamp(e.clamp)}(t,e),function(e,t){"exponent"in e&&void 0!==e.exponent&&"exponent"in t&&t.exponent(e.exponent)}(t,e),$e(t,e),_e(t,e),function(e,t){"padding"in e&&void 0!==e.padding&&"padding"in t&&t.padding(e.padding),"paddingInner"in e&&void 0!==e.paddingInner&&"paddingInner"in t&&t.paddingInner(e.paddingInner),"paddingOuter"in e&&void 0!==e.paddingOuter&&"paddingOuter"in t&&t.paddingOuter(e.paddingOuter)}(t,e),function(e,t){if("round"in e&&!0===e.round){const n=t;"round"in n?n.round(e.round):n.interpolate(et.a)}}(t,e),Ge(t,e),e}var ft=function(e){const{range:t}=e;if(e.type===b&&void 0===t){const t="scheme"in e?e.scheme:void 0,n=L.a.getCategoricalColorScaleResolver();let i;i=void 0===t?n({}):ct(t)?n(t):n({name:t});const r=i;return ot(e,r),r}return lt(function(e){switch(e){case c:return Object(ve.a)();case u:return Object(be.a)();case l:return Object(we.a)();case f:return Object(we.b)();case d:return Object(xe.b)();case m:return Object(Oe.a)();case p:return Object(Te.a)();case y:return Object(De.a)();case g:return Object(je.a)();case b:return Object(Se.a)();case w:return Object(Ce.b)();case x:return Object(Ce.a)();case h:return Object(Ee.a)();case v:throw new Error('"type = '+e+'" is not supported yet.');default:return Object(ve.a)()}}(e.type),e)};function ht(e){return e}function dt(e){return"value"in e}function mt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class pt{constructor({name:e,channelType:t,definition:n}){var i;if(mt(this,"name",void 0),mt(this,"channelType",void 0),mt(this,"originalDefinition",void 0),mt(this,"definition",void 0),mt(this,"scale",void 0),mt(this,"axis",void 0),mt(this,"getValue",void 0),mt(this,"encodeFunc",void 0),mt(this,"formatValue",void 0),mt(this,"encodeValue",(e,t)=>void 0!==t&&null==e?t:this.encodeFunc(e)),mt(this,"encodeDatum",(e,t)=>void 0===t?this.encodeValue(this.getValueFromDatum(e)):this.encodeValue(this.getValueFromDatum(e),t)),mt(this,"formatDatum",e=>this.formatValue(this.getValueFromDatum(e))),mt(this,"getValueFromDatum",(e,t)=>{const n=this.getValue(e);return void 0!==t&&null==n?t:n}),mt(this,"getDomainFromDataset",e=>{if(Object(r.c)(this.definition)){const{value:e}=this.definition;return[e]}const{type:t}=this.definition;if("nominal"===t||"ordinal"===t)return Array.from(new Set(e.map(e=>this.getValueFromDatum(e))));if("quantitative"===t){if(this.definition.scale&&"quantile"===this.definition.scale.type)return e.map(e=>this.getValueFromDatum(e));const t=Object(s.a)(e,e=>this.getValueFromDatum(e));return void 0===t[0]?[0,1]:t}if("temporal"===t){const t=Object(s.a)(e,e=>this.getValueFromDatum(e));return void 0===t[0]?[0,1]:t}return[]}),this.name=e,this.channelType=t,this.originalDefinition=n,this.definition=ge(this.channelType,n),this.getValue=(i=this.definition,Object(r.c)(i)?()=>i.value:void 0!==i.field?e=>X()(e,i.field):()=>{}),this.formatValue=Object(r.a)(this.definition)?A(this.definition):z,this.definition.scale){const e=ft(this.definition.scale);this.encodeFunc=t=>e(t),this.scale=e}else{const{definition:e}=this;this.encodeFunc=dt(e)?()=>e.value:ht}this.definition.axis&&(this.axis=new B(this))}getDomain(){return this.scale&&"domain"in this.scale?this.scale.domain():[]}setDomain(e){if(!1!==this.definition.scale&&this.scale&&!this.hasCategoricalColorScale()&&"domain"in this.scale){const t=this.definition.scale;ot(t,this.scale,e),ut(t,this.scale),Ge(t,this.scale),_e(t,this.scale)}return this}setDomainFromDataset(e){return this.scale&&"domain"in this.scale?this.setDomain(this.getDomainFromDataset(e)):this}getTitle(){return this.definition.title}isGroupBy(){if(Object(r.b)(this.definition)){const{type:e}=this.definition;return"Category"===this.channelType||"Text"===this.channelType||"Color"===this.channelType&&("nominal"===e||"ordinal"===e)||D(this.channelType)&&("nominal"===e||"ordinal"===e)}return!1}isX(){return O(this.channelType)}isXOrY(){return D(this.channelType)}isY(){return T(this.channelType)}hasCategoricalColorScale(){const e=this.definition.scale;return this.scale&&e&&e.type===b&&void 0===e.range}hasLegend(){return!1!==this.definition.legend}hasValueDefinition(){return dt(this.definition)}hasFieldDefinition(){return"field"in this.definition}}function yt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class gt{constructor({channelTypes:e,encoding:t}){yt(this,"encoding",void 0),yt(this,"channelTypes",void 0),yt(this,"channels",void 0),yt(this,"legends",void 0),this.channelTypes=e,this.encoding=t;const n=this.getChannelNames(),i={};n.forEach(n=>{const r=t[n];if(Array.isArray(r)){const t=r;i[n]=t.map((t,i)=>new pt({channelType:e[n],definition:t,name:n+"["+i+"]"}))}else{const t=r;i[n]=new pt({channelType:e[n],definition:t,name:n})}}),this.channels=i,this.legends={},n.map(e=>this.channels[e]).forEach(e=>{if(a(e)&&e.hasLegend()&&Object(r.b)(e.definition)){const{field:t}=e.definition,n=e;this.legends[t]?this.legends[t].push(n):this.legends[t]=[n]}})}getChannelNames(){return Object.keys(this.channelTypes)}getChannelEncoders(){return this.getChannelNames().flatMap(e=>this.channels[e])}getGroupBys(){const e=this.getChannelEncoders().filter(e=>e.isGroupBy()).map(e=>e.definition.field);return Array.from(new Set(e))}createLegendItemsFactory(e){const t=this.getChannelEncoders().filter(e=>a(e)&&Object(r.c)(e.definition)).flat().concat(this.legends[e]);return e=>e.map(e=>({input:e,output:t.reduce((t,n)=>{const i=t;return i[n.name]=n.encodeValue(e),i},{})}))}getLegendInformation(e=[]){return Object.keys(this.legends).map(t=>{const n=this.legends[t],i=n[0],r=i.definition,a=this.createLegendItemsFactory(t);return"nominal"===r.type?{channelEncoders:n,createLegendItems:a,field:t,items:a(i.getDomainFromDataset(e)),type:r.type}:{channelEncoders:n,createLegendItems:a,field:t,type:r.type}})}setDomainFromDataset(e){return this.getChannelEncoders().forEach(t=>{t.setDomainFromDataset(e)}),this}hasLegend(){return Object.keys(this.legends).length>0}}function vt(e){const{channelTypes:t}=e,n="defaultEncoding"in e?t=>function(e,t){return{...e,...t}}(e.defaultEncoding,t):e.completeEncoding,r=(e={})=>new gt({channelTypes:t,encoding:n(e)});return{channelTypes:t,create:r,createSelector:()=>Object(i.a)(e=>e,r),DEFAULT_ENCODING:n({})}}},4336:function(e,t,n){"use strict";n.r(t),n.d(t,"dispatch",(function(){return u}));var i={value:function(){}};function r(){for(var e,t=0,n=arguments.length,i={};t<n;++t){if(!(e=arguments[t]+"")||e in i||/[\s.]/.test(e))throw new Error("illegal type: "+e);i[e]=[]}return new a(i)}function a(e){this._=e}function o(e,t){return e.trim().split(/^|\s+/).map((function(e){var n="",i=e.indexOf(".");if(i>=0&&(n=e.slice(i+1),e=e.slice(0,i)),e&&!t.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:n}}))}function s(e,t){for(var n,i=0,r=e.length;i<r;++i)if((n=e[i]).name===t)return n.value}function c(e,t,n){for(var r=0,a=e.length;r<a;++r)if(e[r].name===t){e[r]=i,e=e.slice(0,r).concat(e.slice(r+1));break}return null!=n&&e.push({name:t,value:n}),e}a.prototype=r.prototype={constructor:a,on:function(e,t){var n,i=this._,r=o(e+"",i),a=-1,u=r.length;if(!(arguments.length<2)){if(null!=t&&"function"!=typeof t)throw new Error("invalid callback: "+t);for(;++a<u;)if(n=(e=r[a]).type)i[n]=c(i[n],e.name,t);else if(null==t)for(n in i)i[n]=c(i[n],e.name,null);return this}for(;++a<u;)if((n=(e=r[a]).type)&&(n=s(i[n],e.name)))return n},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new a(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,i,r=new Array(n),a=0;a<n;++a)r[a]=arguments[a+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=0,n=(i=this._[e]).length;a<n;++a)i[a].value.apply(t,r)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var i=this._[e],r=0,a=i.length;r<a;++r)i[r].value.apply(t,n)}};var u=r},4373:function(e,t,n){"use strict";n.r(t),n.d(t,"ROTATION",(function(){return d}));var i=n(2),r=n.n(i),a=n(0),o=n.n(a),s=n(4320),c=n.n(s),u=n(4329),l=n(115);function f(){return(f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const d={flat:()=>0,random:()=>30*Math.floor(6*Math.random()-3),square:()=>90*Math.floor(2*Math.random())};class m extends o.a.PureComponent{constructor(...e){super(...e),h(this,"isComponentMounted",!1),h(this,"state",{words:[]}),h(this,"wordCloudEncoderFactory",Object(u.a)({channelTypes:{color:"Color",fontFamily:"Category",fontSize:"Numeric",fontWeight:"Category",text:"Text"},defaultEncoding:{color:{value:"black"},fontFamily:{value:this.props.theme.typography.families.sansSerif},fontSize:{value:20},fontWeight:{value:"bold"},text:{value:""}}})),h(this,"createEncoder",this.wordCloudEncoderFactory.createSelector()),h(this,"setWords",e=>{this.isComponentMounted&&this.setState({words:e})})}componentDidMount(){this.isComponentMounted=!0,this.update()}componentDidUpdate(e){const{data:t,encoding:n,width:i,height:r,rotation:a}=this.props;e.data===t&&e.encoding===n&&e.width===i&&e.height===r&&e.rotation===a||this.update()}componentWillUnmount(){this.isComponentMounted=!1}update(){const{data:e,width:t,height:n,rotation:i,encoding:r}=this.props,a=this.createEncoder(r);a.setDomainFromDataset(e),c()().size([t,n]).words(e.map(e=>f({},e))).padding(5).rotate(d[i]||d.flat).text(e=>a.channels.text.getValueFromDatum(e)).font(e=>a.channels.fontFamily.encodeDatum(e,this.props.theme.typography.families.sansSerif)).fontWeight(e=>a.channels.fontWeight.encodeDatum(e,"normal")).fontSize(e=>a.channels.fontSize.encodeDatum(e,0)).on("end",this.setWords).start()}render(){const{width:e,height:t,encoding:n}=this.props,{words:i}=this.state,r=this.createEncoder(n);return r.channels.color.setDomainFromDataset(i),o.a.createElement("svg",{width:e,height:t},o.a.createElement("g",{transform:"translate("+e/2+","+t/2+")"},i.map(e=>o.a.createElement("text",{key:e.text,fontSize:e.size+"px",fontWeight:e.weight,fontFamily:e.font,fill:r.channels.color.encodeDatum(e,""),textAnchor:"middle",transform:"translate("+e.x+", "+e.y+") rotate("+e.rotate+")"},e.text))))}}h(m,"propTypes",{rotation:r.a.any,data:r.a.array.isRequired,height:r.a.number.isRequired,width:r.a.number.isRequired}),h(m,"defaultProps",{encoding:{},rotation:"flat"}),t.default=Object(l.c)(m)}}]);